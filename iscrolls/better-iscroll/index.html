<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1,user-scalable=no">
	<title>Document</title>
	<link rel="stylesheet" href="css/common.css">
	<script>(function (doc, win) {var docEl = doc.documentElement,resizeEvt = 'orientationchange' in window ? 'orientationchange' : 'resize';var recalc = function () {var clientWidth = docEl.clientWidth;if (!clientWidth) return;if (clientWidth>650) {docEl.style.fontSize = '34.56px';return};docEl.style.fontSize = 20 * (clientWidth / 375) + 'px';};if (!doc.addEventListener) return;recalc();win.addEventListener(resizeEvt, recalc, false);doc.addEventListener('DOMContentLoaded', recalc, false);})(document, window);</script>
	<style type="text/css">
		.main{
			width: 100%;
			display: flex;
		}
		.left{
			flex:0 0 80px;
			background-color: #eee;
		}
		.right{
			flex:1;
		}
		.li{
			display: table;
		    height: 54px;
		    width: 56px;
		    padding: 0 12px;
		    line-height: 14px;
			border-bottom: 1px solid #ccc;
		}
		.text{
			display: table-cell;
		    width: 56px;
		    vertical-align: middle;
		    position: relative;
		    font-size: 12px;
		}
		.lis{
			height: 250px;
			font-size: 12px;
		}
		.active{
			background-color: #abc;
		}
	</style>
</head>
<body>
 <div class="mod-container">
 	<header class="pub-head bdr-bottom">
 	    <div class="head-content ">头部</div>
 	</header>
	<div class="main main-both">

			<div class="left">
				<ul>
					<li class="li active"><span class="text">的范德萨看见粉的sdf</span></li>
					<li class="li"><span class="text">哈哈111</span></li>
					<li class="li"><span class="text">哈哈222</span></li>
					<li class="li"><span class="text">哈哈333</span></li>
					<li class="li"><span class="text">哈哈444</span></li>
					<li class="li"><span class="text">哈哈555</span></li>
					<li class="li"><span class="text">哈哈666</span></li>
					<li class="li"><span class="text">哈哈777</span></li>
					<li class="li"><span class="text">哈哈888</span></li>
					<li class="li"><span class="text">哈哈999</span></li>
				</ul>
			</div>
			<div class="right">
				<ul>
					<li class="lis">00000000000</li>
					<li class="lis">11111</li>
					<li class="lis">222222</li>
					<li class="lis">3333333</li>
					<li class="lis">444444444</li>
					<li class="lis">5555555555</li>
					<li class="lis">666666666</li>
					<li class="lis">77777777777</li>
					<li class="lis">8888888</li>
					<li class="lis">999999999</li>
				</ul>
		
		</div>
	</div>
	<footer class="pub-cart">
	  尾部
	</footer>
</div>
	<script type="text/javascript" src="js/jquery.js"></script>
	<script type="text/javascript" src="js/bscroll.js"></script>
	<script type="text/javascript">
		var lefts = wrapper = document.querySelector('.left');
		var rights = wrapper = document.querySelector('.right');
		var a = new BScroll(lefts,{probeType: 3,click: true}); 
		var b = new BScroll(rights,{probeType: 3,click: true}); 

		var Lis = document.getElementsByClassName('li');
		var Liss = document.getElementsByClassName('lis');


		var scrollY = 0;

		var lis = document.querySelectorAll('.li');
		var li = document.querySelectorAll('.lis');
		var arr = [];
		var arrH = 0;
		for(var k = 0;k<li.length;k++){
			var ks = li[k];
			arrH += ks.clientHeight*1;
			arr.push(arrH);
		}
		b.on('scroll',function(pos){
          if (pos.y <= 0) {
           	scrollY = Math.abs(Math.round(pos.y));
          }
          var len = ass(scrollY);
          for(var s = 0;s<Lis.length;s++){
          	Lis[s].setAttribute('class','li');
          }
          if((len+1) >= arr.length){	
          	Lis[0].setAttribute('class','li active');
          	var el = Lis[0];
          	a.scrollToElement(el, 300, 0, -100);	
          	//a.scrollToElement(Lis[0], 300);
          	//$('.li').eq(0).addClass('active').siblings().removeClass('active');
          }else{
          	Lis[len+1].setAttribute('class','li active');
          	var el = Lis[len+1];
			a.scrollToElement(el, 300, 0, -100);
          	//a.scrollToElement(Lis[len+1], 300);
          	//$('.li').eq(len+1).addClass('active').siblings().removeClass('active');
          }
        });
        function ass(ys){
        	for(var s = 0;s<arr.length;s++){
        		var height1 = arr[s];
        		var height2 = arr[s + 1];
        		if (!height2 || (ys >= height1 && ys < height2)) {
        	      return s;
        	    }
        	}
        	return 0;
        }
        for(var k = 0;k<Lis.length;k++){
        	Lis[k].index = k;
        	Lis[k].onclick = function(event){
        		if(!event._constructed){
        			return;
        		}
	        	var index = this.index;
	        	for(var s = 0;s<Lis.length;s++){
	        		Lis[s].setAttribute('class','li');
	        	}
	        	var el = Liss[index];
	        	Lis[index].setAttribute('class','li active');
	        	b.scrollToElement(el, 300);
	        }
        }
	</script>
</body>
</html>